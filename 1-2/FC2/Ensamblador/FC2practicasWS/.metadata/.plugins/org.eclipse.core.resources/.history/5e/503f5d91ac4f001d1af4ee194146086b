/*---------------------------------------------------------------------
**
**  Fichero:
**    fun_asm.c  19/10/2022
**
**    (c) Daniel Báscones García
**    Fundamentos de Computadores II
**    Facultad de Informática. Universidad Complutense de Madrid
**
**  Propósito:
**    Fichero de código para la práctica 4
**
**-------------------------------------------------------------------*/


//rellenar con directivas .extern y .global
//con las funciones apropiadas


//int eucl_dist(int * w, int size);
.global eucl_dist
eucl_dist:
    //recibo dirección de W en a0, y tamaño N en a1
    //realizo los cálculos pertinentes
    //devuelvo el resultado en a0
    addi sp ,sp , -20
	sw ra ,( sp)
	sw s1 ,4( sp)
	sw s2 ,8( sp)
	sw s3 ,12( sp)
	sw s4, 16( sp)

    mv s1, a0 //*w
    mv s2, a1 //size
    li s3, 0  //acc
    li s4, 0  //i
 	ed_for:
 		bge s4, s2, fin_ed_for
 		lw a0, 0(s1)
 		mv a1, a0
 		.extern mul
 		call mul
 		add s3, s3, a0
 		addi s1, s1, 4
 		addi s4, s4, 1
 		j ed_for
 	fin_ed_for:
    mv a0, s3

    lw ra ,( sp)
	lw s1 ,4( sp)
	lw s2 ,8( sp)
	lw s3 ,12( sp)
	lw s4 ,16( sp)
	addi sp ,sp ,20
	ret

//int guardar(char valor, char * ubicacion);
.global guardar
guardar:
    //recibo el valor en a0, y la dirección destino en a1
    //asegurarse que sólo se guarda UN BYTE!!
    sb a0, 0(a1)
	ret
