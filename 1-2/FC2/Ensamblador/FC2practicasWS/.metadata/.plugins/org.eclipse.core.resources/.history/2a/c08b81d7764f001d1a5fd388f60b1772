/*---------------------------------------------------------------------
**
**  Fichero:
**    pr2_b.asm  19/10/2022
**
**    (c) Daniel Báscones García
**    Fundamentos de Computadores II
**    Facultad de Informática. Universidad Complutense de Madrid
**
**  Propósito:
**    Fichero de código para la práctica 2b
**
**  Notas de diseño:
**
**	# define N 8
**	# define INT_MAX 2147483647
**	int V [ N ] = { -7 ,3 , -9 ,8 ,15 , -16 ,0 ,3};
**	int W [ N ];
**	int min , index ;
**	for ( j = 0; j < N ; j ++) {
**		min = INT_MAX ;
**		for ( i = 0; i < N ; i ++) {
**			if ( V [ i ] < min ) {
**				min = V [ i ];
**				index = i ;
**			}
**		}
**		W [ j ] = V [ index ];
**		V [ index ] = INT_MAX ;
**	}
**
**-------------------------------------------------------------------*/

.global main
.equ N , 8
.equ INT_MAX , 2147483647

.data
V: 	 .word -7 ,3 , -9 ,8 ,15 , -16 ,0 ,3
.bss
W: 	 .space N *4
min: .space 4
ind: .space 4

.text
main :
// codificar
	la s0, V
	la s1, W
	la s2, min
	la s3, ind
	li s4, N
	li t0, 0 			//j = 0
bucle_j:
	bge t0, s4, fin_bucle_j
	li t1, INT_MAX 		//min = INT_MAX
	sw t1, 0(s2)
	sw zero, 0(s3) 		//ind = 0
	li t2, 0 			//i = 0
	bucle_i:
		bge t2, s4, fin_bucle_i
		slli a0, t2, 2
		add a0, a0, s0 	//genero dir de V
		lw t3, 0(a0)	//cargo v[i]
		lw t1, 0(s2)	//cargo min
		bge t3, t1, no_actualiza
		sw t3, 0(s2) 	//min = V[i]
		sw t2, 0(s3) 	//ind = i
		no_actualiza:
		addi t2, t2, 1
		j bucle_i
	fin_bucle_i:
	slli a0, t0, 2
	add a0, a0, s1 	//genero dir de W
	lw a1, 0(s3)
	slli a1, a1, 2
	add a1, a1, s0 	//genero dir de V
	lw a2, 0(a1)
	sw a2, 0(a0)	//W[j] = V[index]
	li a2, INT_MAX
	sw a2, 0(a1)	//V[index] = INT_MAX
	addi t0, t0, 1
	j bucle_j
fin_bucle_j:

